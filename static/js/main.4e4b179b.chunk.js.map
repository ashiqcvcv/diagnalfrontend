{"version":3,"sources":["hooks/useInterSectionHook.js","redux/page/types.js","Components/Home/Home.jsx","redux/page/actions.js","Components/Navbar/Navbar.jsx","api/axios.config.js","api/endpoints.js","redux/books/types.js","redux/books/actions.js","api/apiServices.js","App.js","reportWebVitals.js","redux/books/reducer.js","redux/page/reducer.js","config/combineReducers.js","config/store.js","config/clientMiddleware.js","index.js"],"names":["useInterSectionHook","onObserve","useState","isIntersecting","setIsIntersecting","elementRef","useRef","observer","IntersectionObserver","entries","entry","useEffect","obs","current","elm","observe","disconnect","PAGE_SCROLL","Home","books","dispatch","type","useSelector","state","pageno","useDispatch","className","map","cover","i","ref","length","src","x","alt","name","Navbar","width","height","placeholder","Component","axiosClient","require","default","create","baseURL","process","REACT_APP_BASE_URL","timeout","headers","URLS","GET_BOOKS_REQUEST","GET_BOOKS_SUCCESS","GET_BOOKS_FAILURE","getBooksAction","api","types","request","get","params","no","getBooks","formatRes","res","data","page","content","onSuccess","onFailure","showFailureMessage","App","loading","nextPage","console","log","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","booksReducer","action","concat","payload","pageReducer","rootReducer","combineReducers","PageReducer","store","client","middlewares","getState","next","REQUEST","SUCCESS","FAILURE","catch","err","enhancers","applyMiddleware","composedEnhancers","composeWithDevTools","createStore","configureStore","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.4e4b179b.chunk.js","sourcesContent":["import { useEffect, useRef, useState } from \"react\";\n\nconst useInterSectionHook = (onObserve) => {\n  const [isIntersecting, setIsIntersecting] = useState(false);\n\n  const elementRef = useRef();\n  const observer = useRef(\n    new IntersectionObserver((entries) => {\n      const entry = entries[0];\n      if (entry) {\n        setIsIntersecting(entry.isIntersecting);\n      }\n    })\n  );\n\n  useEffect(() => {\n    if (isIntersecting) onObserve();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isIntersecting]);\n\n  useEffect(() => {\n    const obs = observer.current;\n    const elm = elementRef.current;\n    if (obs && elm) {\n      obs.observe(elm);\n    }\n\n    return () => {\n      obs.disconnect();\n    };\n  });\n\n  return { elementRef };\n};\n\nexport default useInterSectionHook;\n","export const PAGE_SCROLL = \"PAGE_SCROLL\";\nexport const PAGE_END = \"PAGE_END\";\n","import React from 'react';\r\nimport useInterSectionHook from '../../hooks/useInterSectionHook';\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { pageIncrement } from \"../../redux/page/actions\";\r\nconst imageUrl = (x) => `/Slices/${x}`\r\n\r\nexport const Home = ({ books }) => {\r\n\r\n  const callback = () => {\r\n    dispatch(pageIncrement(pageno));\r\n  }\r\n\r\n  const { elementRef } = useInterSectionHook(callback);\r\n  const pageno = useSelector((state) => state.pageno);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  return (\r\n    <div className=\"max-w-4xl py-5 px-4 sm:py-24 sm:px-6\">\r\n\r\n      <div className=\"grid grid-cols-3 gap-y-2 gap-x-6 sm:grid-cols-2 overflow-auto\">\r\n        {(books || []).map((cover, i) => (\r\n          <div key={i} className=\"group relative\" ref={i === books.length - 1 ? elementRef : null}>\r\n            <div className=\"w-full min-h-80 bg-gray-200 aspect-w-1 aspect-h-1\">\r\n              <img\r\n                src={imageUrl(cover['poster-image'])}\r\n                alt={'cover.imageAlt'}\r\n                className=\"w-full h-full object-center object-cover lg:w-full lg:h-full\"\r\n              />\r\n            </div>\r\n            <div className=\"flex justify-between\">\r\n              <div>\r\n                <p className=\"text-sm text-gray-500\">{cover.name}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n    </div>)\r\n\r\n\r\n};\r\n\r\nexport default Home\r\n","import {\n  PAGE_SCROLL,\n  PAGE_END\n} from \"./types\";\n\nexport const pageIncrement = () => {\n  return {\n    type: PAGE_SCROLL,\n  }\n};\n","import React, { Component } from 'react'\r\n\r\nexport class Navbar extends Component {\r\n    render() {\r\n        return (\r\n            //h-48 is 196 px\r\n            <div className='bg-navbar bg-cover fixed z-10 h-20'> \r\n                <button className='ml-3 mt-1'><img src=\"/Slices/Back.png\" alt=\"back\" width='20px'height='20px' /></button>\r\n                <input type=\"text\" className=\"h-7 w-76 pr-8 pl-5 rounded z-0 focus:shadow focus:outline-none bg-opacity-0\" placeholder=\"Search anything...\" />\r\n                <button className='ml-14 mt-2 pr-2'><img src=\"/Slices/search.png\" alt=\"search\" width='20px'height='20px' /></button>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Navbar\r\n","const { default: axios } = require(\"axios\");\n\nexport const axiosClient = axios.create({\n  baseURL: process.env.REACT_APP_BASE_URL,\n  timeout: 20000,\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n});\n","export const URLS = {\n  GET_BOOKS: \"https://diagnalbackend.herokuapp.com/api\",\n};\n","export const GET_BOOKS_REQUEST = \"GET_BOOKS_REQUEST\";\nexport const GET_BOOKS_SUCCESS = \"GET_BOOKS_SUCCESS\";\nexport const GET_BOOKS_FAILURE = \"GET_BOOKS_FAILURE\";\nexport const ADD_BOOKS_REQUEST = \"ADD_BOOKS_REQUEST\";\n","import { getBooks } from \"../../api/apiServices\";\nimport {\n  GET_BOOKS_REQUEST,\n  GET_BOOKS_SUCCESS,\n  GET_BOOKS_FAILURE\n} from \"./types\";\n\nexport const getBooksAction = (pageno) => {\n  return {\n    api: true,\n    types: [GET_BOOKS_REQUEST, GET_BOOKS_SUCCESS, GET_BOOKS_FAILURE],\n    request: () => getBooks(pageno),\n    formatRes: (res) => {\n      return {\n        books: res?.data?.page[\"content-items\"]?.content || [],\n        pageno\n      };\n    },\n    onSuccess: () => {},\n    onFailure: () => {},\n    showFailureMessage: true,\n  };\n};\n","import { axiosClient } from \"./axios.config\";\nimport { URLS } from \"./endpoints\";\n\nexport const getBooks = (pageno) => {\n  return axiosClient.get(URLS.GET_BOOKS, { params: { no: pageno } });\n};\n","import { useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport \"./App.css\";\nimport Home from \"./Components/Home/Home\";\nimport Navbar from \"./Components/Navbar/Navbar\";\nimport { getBooksAction } from \"./redux/books/actions\";\n\nfunction App() {\n  const { loading, data: books, pageno } = useSelector((state) => state.books);\n  const nextPage = useSelector((state) => state.pageno);\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (!books) {\n      console.log('useefect 1')\n      dispatch(getBooksAction(1));\n    }\n    \n  }, [books, dispatch]);\n\n  useEffect(() => {\n    console.log(pageno, nextPage)\n    if ( nextPage <= 3 && pageno !== nextPage ) {\n      dispatch(getBooksAction(nextPage));\n      console.log('useefect 2')\n    }\n  }, [dispatch, nextPage, pageno])\n\n  return (\n    <div className=\"bg-black\">\n      <Navbar />\n      <Home books={books} loading={loading} />\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import {\n  GET_BOOKS_REQUEST,\n  GET_BOOKS_SUCCESS,\n  GET_BOOKS_FAILURE,\n  ADD_BOOKS_REQUEST\n} from \"./types\";\n\nconst initialState = {\n  loading: false,\n  data: null,\n  pageno: 1\n};\n\nconst booksReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case GET_BOOKS_REQUEST: {\n      return { ...state, loading: true };\n    }\n\n    case GET_BOOKS_SUCCESS: {\n      return {\n        ...state,\n        data: (state.data || []).concat(action.payload.books),\n        loading: false,\n        pageno: action.payload.pageno\n      };\n    }\n\n    case GET_BOOKS_FAILURE: {\n      return { ...state, loading: false };\n    }\n\n    default:\n      return state;\n  }\n};\n\nexport default booksReducer;\n","import {\r\n    PAGE_SCROLL, PAGE_END\r\n} from \"../page/types\";\r\n\r\nconst pageReducer = (state = 1, action) => {\r\n    switch (action.type) {\r\n        case PAGE_SCROLL:\r\n            return state + 1;\r\n        case PAGE_END:\r\n            return state;\r\n        default:\r\n            return state;\r\n    }\r\n};\r\nexport default pageReducer;","import { combineReducers } from \"redux\";\nimport booksReducer from \"../redux/books/reducer\";\nimport PageReducer from '../redux/page/reducer';\n\nconst rootReducer = combineReducers({\n  books: booksReducer, pageno: PageReducer\n});\n\nexport default rootReducer;\n","import { createStore, applyMiddleware } from \"redux\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport { clientMiddleware } from \"./clientMiddleware\";\nimport { axiosClient } from \"../api/axios.config\";\nimport rootReducer from \"./combineReducers\";\n\nfunction configureStore(initialState) {\n  let middlewares = [clientMiddleware(axiosClient)];\n\n  if (process.env.NODE_ENV === \"development\") {\n    middlewares = [...middlewares];\n  }\n  const middlewareEnhancer = applyMiddleware(...middlewares);\n\n  const enhancers = [middlewareEnhancer];\n  const composedEnhancers = composeWithDevTools(...enhancers);\n\n  const store = createStore(rootReducer, initialState, composedEnhancers);\n\n  return store;\n}\n\nexport const store = configureStore({});\n","export function clientMiddleware(client) {\n  return ({ dispatch, getState }) =>\n    (next) =>\n    (action) => {\n      if (action.api) {\n        const [REQUEST, SUCCESS, FAILURE] = action.types;\n        dispatch({ type: REQUEST });\n\n        action\n          .request(client)\n          .then((res) => {\n            dispatch({\n              type: SUCCESS,\n              payload: action.formatRes ? action.formatRes(res) : res,\n            });\n            // if (action.onSuccess) {\n            //   action.onSuccess(res);\n            // }\n          })\n          .catch((err) => {\n            if (action.showFailureMessage) {\n            }\n            dispatch({ type: FAILURE });\n          });\n\n        return;\n      }\n\n      return next(action);\n    };\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { store } from \"./config/store\";\nimport { Provider } from \"react-redux\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}